# Local Domain, this will be the root
dn: dc={{hostname}}.local
dc: {{hostname}}.local
objectClass: domain
objectClass: top
structuralObjectClass: domain

# {{daemons}}
dn: ou={{daemons}},dc={{hostname}}.local
objectClass: organizationalUnit
objectClass: top
structuralObjectClass: organizationalUnit
ou: {{daemons}}

# Users
dn: ou={{inhabitants}},dc={{hostname}}.local
objectClass: organizationalUnit
objectClass: top
structuralObjectClass: organizationalUnit
ou: {{inhabitants}}

# Postfix
dn: uid=postfix,ou={{daemons}},dc={{hostname}}.local
objectClass: account
objectClass: simpleSecurityObject
objectClass: top
userPassword:: {{postfix_password}}
uid: postfix
structuralObjectClass: account

# Dovecot - imap, pop, auth frontend
dn: uid=dovecot,ou={{daemons}},dc={{hostname}}.local
objectClass: account
objectClass: simpleSecurityObject
objectClass: top
uid: dovecot
structuralObjectClass: account
userPassword:: {{dovecot_password}}

# SASL - auth backend
dn: uid=sasl,ou={{daemons}},dc={{hostname}}.local
objectClass: account
objectClass: simpleSecurityObject
objectClass: top
userPassword:: {{sasl_password}}
uid: sasl
structuralObjectClass: account

# Groups
dn: ou={{groups}},dc={{hostname}}.local
objectClass: organizationalUnit
objectClass: top
ou: {{groups}}
structuralObjectClass: organizationalUnit

# Meta group to retrieve all accounts - useful for common address book
# and jabber shared roster
dn: cn={{inhabitants}},ou={{groups}},dc={{hostname}}.local
cn: {{inhabitants}}
objectClass: groupOfURLs
objectClass: top
structuralObjectClass: groupOfURLs
description: {{inhabitants}}
memberURL: ldap:///ou={{inhabitants}},dc={{hostname}}.local?cn,uid,mail?sub?(&(objectClass=CourierMailAccount)(mail=*@{{domain}}))

# Admins
dn: ou={{admins}},dc={{hostname}}.local
objectClass: organizationalUnit
objectClass: top
ou: {{admins}}
structuralObjectClass: organizationalUnit

# Admin account
dn: uid={{admin}},ou={{admins}},dc={{hostname}}.local
objectClass: account
objectClass: simpleSecurityObject
objectClass: top
uid: {{admin}}
structuralObjectClass: account
userPassword:: {{admin_password}}
